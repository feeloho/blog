# 一些比较容易搞混的概念

这里记录了一些容易搞混的概念，当然这些概念并不仅仅出现在程序设计中。我会尽量通俗易懂的去解释这些概念，与此同时也会失去一定严谨性。如果有错误或者建议请在下面回复，我会改的。(°□°；)



## 01. 观察者模式与发布订阅模式

发布订阅模式可以理解成是观察者模式的一个扩展，观察者和被观察者之间多出了一层。

**观察者模式**：假如我养了只猫，我想时刻都能知道它的状态。好的，那么很简单，你只需要在家 24 小时盯着它看就好了。此时观察者是你，而被观察者就是这只猫了。

**发布订阅模式**：假如有一天我要出门，这样就不能 24 小时盯着它看了，怎么办？很简单，叫你的朋友来盯着它，在它乱叫的时候（行为），打电话通知你。此时订阅者是你，发布者是那只猫，而你朋友是你们之间的中间人。

---

发布订阅模式的优点：

1. **低耦合**：你可以把看猫的事情交给你朋友，麻麻再也不用担心我因为这只猫不能去搞事情了。
2. **可异步**：你的朋友可能不会把猫的变化第一时间内转达给你，你可能也不能在第一时间给出应对措施。




## 02. 共享锁与排它锁

共享锁又叫读锁，它只能读。排它锁也叫写锁，它既能读也能写。

例如有 2 个人，一个叫共享，一个叫排它。然后我把一些画给了他们。

1. **共享**：这些画是我的，但是我愿意分给更多共享的人去看，但是我不会分给排它，因为他们太自私。
2. **排它**：这些画是我一个人的，任何人都不要妄想从我这里得到它，它是我的个人财产，我甚至可以毁掉它。





## 03. 悲观锁与乐观锁

悲观锁和乐观锁是为保证事务中数据的一致性、隔离性而产生的技术手段。在数据库中，它们的实现是依赖于数据库本身所提供的锁机制来完成的。也就是说它们只是一种设计思想，具体的实现方式可能不太一样。

**悲观锁**：和它的名字一样，非常的悲观，总想着别人会修改它的数据。所以它会给这些数据加上排它锁。

**乐观锁**：非常的乐观，认为别人不会去修改它的数据。但是在提交这个事务的时候，会采用一种方式来检查数据是否被别人改了（比如对比修改次数，也就是版本号）。如果被改了，则不能提交这次事务，就必须回滚。而下一步要做的可能是直接报错，让用户处理，或者是重新尝试。

